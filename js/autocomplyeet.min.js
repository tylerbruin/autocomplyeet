function ajaxRequest(e,t,n,l){let r=new XMLHttpRequest;r.open(e,t,!0),"POST"==e&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){let e=r.responseText;l(e)}},r.send(n)}function autocomplyeet(e){const t=document.querySelector(e.id);t.setAttribute("autocomplete","off");const n=document.createElement("ul");n.setAttribute("id","ac-list");const l=document.createElement("div");l.classList.add("ac-container"),t.parentNode.insertBefore(l,t);const r=document.createElement("pre");r.setAttribute("id","ac-querySuggestion"),l.appendChild(r),l.appendChild(t),l.appendChild(n),r.style.font=window.getComputedStyle(t,null).getPropertyValue("font"),r.style.background=window.getComputedStyle(t,null).getPropertyValue("background"),t.style.backgroundColor="transparent",r.style.letterSpacing=window.getComputedStyle(t,null).getPropertyValue("letter-spacing"),r.style.padding=window.getComputedStyle(t,null).getPropertyValue("padding");var i=parseInt(window.getComputedStyle(t,null).getPropertyValue("border-left-width"))+parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-left"))+parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"));r.style.paddingLeft=i+"px",t.addEventListener("focusout",function(e){null==e.relatedTarget?(n.innerHTML="",r.innerText=""):"ac-item"!==e.relatedTarget.className&&(n.innerHTML="",r.innerText="")}),t.addEventListener("input",function(){if(t.value.length>2){var l=e.server+t.value;ajaxRequest("GET",l,null,function(e){var l=JSON.parse(e);if(l.length>0){var i=l[0];i=i.substring(t.value.length),i=t.value+i,r.innerText=i,n.innerHTML="",n.style.width=t.offsetWidth+"px";for(var a=0;a<l.length;a++){var u=document.createElement("li"),o=l[a].replace(new RegExp("("+t.value.toLowerCase()+")"),'<span class="ac-highlight">'+t.value+"</span>");u.innerHTML=o,u.setAttribute("tabindex","1"),u.classList.add("ac-item"),n.appendChild(u),u.addEventListener("keydown",function(e){"40"==e.keyCode?(e.preventDefault(),this.nextSibling.focus()):"38"==e.keyCode?null!==this.previousSibling?(e.preventDefault(),this.previousSibling.focus()):t.focus():"13"==e.keyCode&&(e.preventDefault(),r.innerText="",t.value=this.innerText,t.focus())}),u.addEventListener("click",function(e){t.value=this.innerText,n.innerHTML="",r.innerText="",t.focus()}),u.addEventListener("focusout",function(e){if(null==e.relatedTarget)n.innerHTML="",r.innerText="";else{if("ac-item"==e.relatedTarget.className||"search"==e.relatedTarget.id)return!1;n.innerHTML="",r.innerText=""}})}}else n.innerHTML="",r.innerText=""})}else n.innerHTML="",r.innerText=""}),t.addEventListener("keydown",function(e){t.value.length>2&&"40"==e.keyCode&&null!==document.querySelector("#ac-list li")&&(e.preventDefault(),document.querySelector("#ac-list li:first-child").focus())})}