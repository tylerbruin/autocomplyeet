function ajaxRequest(e,t,n,r){let i=new XMLHttpRequest;i.open(e,t,!0),"POST"==e&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){let e=i.responseText;r(e)}},i.send(n)}function autocomplyeet(e){const t=document.querySelector(e.id);t.setAttribute("autocomplete","off");const n=document.createElement("ul");n.setAttribute("id","ac-list");const r=document.createElement("div");r.classList.add("ac-container"),t.parentNode.insertBefore(r,t);const i=document.createElement("pre");i.setAttribute("id","ac_querySuggestion"),r.appendChild(i),r.appendChild(t),r.appendChild(n),i.style.fontSize=window.getComputedStyle(t,null).getPropertyValue("font-size"),i.style.fontWeight=window.getComputedStyle(t,null).getPropertyValue("font-weight"),i.style.letterSpacing=window.getComputedStyle(t,null).getPropertyValue("letter-spacing"),i.style.padding=window.getComputedStyle(t,null).getPropertyValue("padding");var l=parseInt(window.getComputedStyle(t,null).getPropertyValue("border-left-width"))+parseInt(window.getComputedStyle(t,null).getPropertyValue("margin-left"))+parseInt(window.getComputedStyle(t,null).getPropertyValue("padding-left"));i.style.paddingLeft=l+"px",t.addEventListener("focusout",function(e){null==e.relatedTarget?(n.innerHTML="",i.innerText=""):"ac-item"!==e.relatedTarget.className&&(n.innerHTML="",i.innerText="")}),t.addEventListener("input",function(){if(t.value.length>2){var r=e.server+t.value;ajaxRequest("GET",r,null,function(e){var r=JSON.parse(e);if(r.length>0){var l=r[0];l=l.substring(t.value.length),l=t.value+l,i.innerText=l,n.innerHTML="",n.style.width=t.offsetWidth+"px";for(var a=0;a<r.length;a++){var o=document.createElement("li"),u=r[a].replace(new RegExp("("+t.value.toLowerCase()+")"),'<span class="ac-highlight">'+t.value+"</span>");o.innerHTML=u,o.setAttribute("tabindex","1"),o.classList.add("ac-item"),n.appendChild(o),o.addEventListener("keydown",function(e){"ArrowDown"==e.key?(e.preventDefault(),this.nextSibling.focus()):"ArrowUp"==e.key?null!==this.previousSibling?(e.preventDefault(),this.previousSibling.focus()):t.focus():"Enter"==e.key&&(e.preventDefault(),i.innerText="",t.value=this.innerText,t.focus())}),o.addEventListener("click",function(e){t.value=this.innerText,n.innerHTML="",i.innerText="",t.focus()}),o.addEventListener("focusout",function(e){if(null==e.relatedTarget)n.innerHTML="",i.innerText="";else{if("ac-item"==e.relatedTarget.className||"search"==e.relatedTarget.id)return!1;n.innerHTML="",i.innerText=""}})}}else n.innerHTML="",i.innerText=""})}else n.innerHTML="",i.innerText=""}),t.addEventListener("keydown",function(e){t.value.length>2&&"ArrowDown"==e.key&&null!==document.querySelector("#ac-list li")&&(e.preventDefault(),document.querySelector("#ac-list li:first-child").focus())})}